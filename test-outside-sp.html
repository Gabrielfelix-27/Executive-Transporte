<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Detec√ß√£o Estados Fora de SP</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .inside-sp {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .outside-sp {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste - Detec√ß√£o de Estados Fora de S√£o Paulo</h1>
    
    <div class="test-container">
        <h2>Teste Manual</h2>
        <input type="text" id="testAddress" placeholder="Digite um endere√ßo para testar...">
        <button onclick="testAddress()">Testar Endere√ßo</button>
        <div id="manualResult"></div>
    </div>

    <div class="test-container">
        <h2>Testes Autom√°ticos</h2>
        <div id="automaticResults"></div>
    </div>

    <script>
        // Simula√ß√£o da fun√ß√£o isOutsideSaoPauloState
        function isOutsideSaoPauloState(address) {
            const addressLower = address.toLowerCase().trim();
            
            // Extrair CEP do endere√ßo
            const cepMatch = address.match(/\b(\d{5})-?(\d{3})\b/);
            
            if (cepMatch) {
                const cep = cepMatch[1] + cepMatch[2];
                const cepNumber = parseInt(cep);
                
                // Faixas de CEP do estado de S√£o Paulo: 01000-000 a 19999-999
                if (cepNumber >= 1000000 && cepNumber <= 19999999) {
                    console.log(`‚úÖ CEP ${cep} est√° dentro do estado de S√£o Paulo`);
                    return false;
                } else {
                    console.log(`‚ùå CEP ${cep} est√° fora do estado de S√£o Paulo`);
                    return true;
                }
            }
            
            // Lista de estados/cidades fora de SP
            const outsideStates = [
                // Rio de Janeiro
                'rio de janeiro', 'rj', 'niter√≥i', 'niteroi', 'petr√≥polis', 'petropolis',
                // Bras√≠lia/DF
                'bras√≠lia', 'brasilia', 'distrito federal', 'df', 'taguatinga', 'ceil√¢ndia',
                // Minas Gerais
                'belo horizonte', 'mg', 'minas gerais', 'contagem', 'uberl√¢ndia', 'uberlandia',
                // Paran√°
                'curitiba', 'paran√°', 'parana', 'pr', 'londrina', 'maring√°', 'maringa',
                // Esp√≠rito Santo
                'vit√≥ria', 'vitoria', 'es', 'esp√≠rito santo', 'espirito santo', 'vila velha',
                // Bahia
                'salvador', 'ba', 'bahia', 'feira de santana',
                // Goi√°s
                'goi√¢nia', 'goiania', 'go', 'goi√°s', 'goias'
            ];
            
            const isOutside = outsideStates.some(location => addressLower.includes(location));
            
            if (isOutside) {
                console.log(`‚ùå Endere√ßo "${address}" detectado como fora do estado de S√£o Paulo`);
                return true;
            }
            
            console.log(`‚úÖ Endere√ßo "${address}" n√£o foi detectado como fora do estado de S√£o Paulo`);
            return false;
        }

        function testAddress() {
            const address = document.getElementById('testAddress').value;
            const result = isOutsideSaoPauloState(address);
            const resultDiv = document.getElementById('manualResult');
            
            resultDiv.innerHTML = `
                <div class="test-result ${result ? 'outside-sp' : 'inside-sp'}">
                    <strong>Endere√ßo:</strong> ${address}<br>
                    <strong>Resultado:</strong> ${result ? '‚ùå Fora de S√£o Paulo' : '‚úÖ Dentro de S√£o Paulo'}
                </div>
            `;
        }

        // Testes autom√°ticos
        function runAutomaticTests() {
            const testCases = [
                // Dentro de SP
                { address: 'Avenida Paulista, 1000, S√£o Paulo, SP', expected: false },
                { address: 'Rua Augusta, 500, S√£o Paulo, SP, 01305-000', expected: false },
                { address: 'Campinas, SP', expected: false },
                { address: 'Santos, SP', expected: false },
                { address: 'Guarulhos, SP', expected: false },
                
                // Fora de SP - Rio de Janeiro
                { address: 'Copacabana, Rio de Janeiro, RJ', expected: true },
                { address: 'Rua das Flores, 123, Rio de Janeiro, RJ, 22071-900', expected: true },
                { address: 'Niter√≥i, RJ', expected: true },
                
                // Fora de SP - Bras√≠lia
                { address: 'Bras√≠lia, DF', expected: true },
                { address: 'Taguatinga, DF', expected: true },
                { address: 'Asa Norte, Bras√≠lia, DF, 70040-010', expected: true },
                
                // Fora de SP - Minas Gerais
                { address: 'Belo Horizonte, MG', expected: true },
                { address: 'Contagem, MG', expected: true },
                { address: 'Rua da Bahia, 1000, Belo Horizonte, MG, 30160-011', expected: true },
                
                // Fora de SP - Paran√°
                { address: 'Curitiba, PR', expected: true },
                { address: 'Londrina, PR', expected: true },
                
                // Fora de SP - Outros estados
                { address: 'Salvador, BA', expected: true },
                { address: 'Vit√≥ria, ES', expected: true },
                { address: 'Goi√¢nia, GO', expected: true }
            ];

            const resultsDiv = document.getElementById('automaticResults');
            let html = '';
            let passed = 0;
            let failed = 0;

            testCases.forEach((testCase, index) => {
                const result = isOutsideSaoPauloState(testCase.address);
                const success = result === testCase.expected;
                
                if (success) passed++;
                else failed++;

                html += `
                    <div class="test-result ${success ? 'inside-sp' : 'outside-sp'}">
                        <strong>Teste ${index + 1}:</strong> ${testCase.address}<br>
                        <strong>Esperado:</strong> ${testCase.expected ? 'Fora de SP' : 'Dentro de SP'}<br>
                        <strong>Resultado:</strong> ${result ? 'Fora de SP' : 'Dentro de SP'}<br>
                        <strong>Status:</strong> ${success ? '‚úÖ PASSOU' : '‚ùå FALHOU'}
                    </div>
                `;
            });

            html = `
                <div style="margin-bottom: 20px; padding: 15px; background-color: ${failed === 0 ? '#d4edda' : '#f8d7da'}; border-radius: 4px;">
                    <strong>Resumo dos Testes:</strong><br>
                    ‚úÖ Passou: ${passed}<br>
                    ‚ùå Falhou: ${failed}<br>
                    üìä Total: ${testCases.length}
                </div>
            ` + html;

            resultsDiv.innerHTML = html;
        }

        // Executar testes autom√°ticos ao carregar a p√°gina
        window.onload = runAutomaticTests;
    </script>
</body>
</html>